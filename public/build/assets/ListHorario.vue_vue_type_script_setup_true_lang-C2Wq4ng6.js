import{s as h}from"./index-CIJ9kEDP.js";import{s as T,a as n}from"./index-8c4t-1rM.js";import{s as A,a as B,b as N}from"./index-CqE_d7Eh.js";import{s as H}from"./index-DWx6GgBR.js";import{s as M}from"./index-DTrYfW8t.js";import{d as j,r as o,aa as z,B as P,a2 as G,o as K,c as q,a as J,F as Q,b as e,f as a,w as u,g as c}from"./app-CSI2DTQR.js";import{l as W}from"./lodash-B3zt2wbW.js";import{_ as X}from"./DeleteHorario.vue_vue_type_script_setup_true_lang-CKyc0q_O.js";import{_ as Y}from"./UpdateHorario.vue_vue_type_script_setup_true_lang-DJqiPExa.js";const Z={class:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between w-full"},ee={class:"flex flex-col sm:flex-row gap-2 w-full md:w-auto"},ae={class:"flex gap-2"},ce=j({__name:"ListHorario",props:{refresh:{}},setup(x){const S=x,k=o(null),g=o([]),w=o(null),p=o(!1),m=o(""),f=o(!1),b=o(null),y=o(null),d=o(null),v=o(!1),_=o(1),I=z(),r=o({currentPage:1,perPage:15,total:0}),C=o({state:null}),V=o([{name:"TODOS",value:""},{name:"ACTIVOS",value:1},{name:"INACTIVOS",value:0}]);P(()=>S.refresh,()=>{i()}),P(()=>d.value,()=>{_.value=1,i()});function $(s){y.value=s.id,v.value=!0}function E(){i()}function R(s){b.value=s,f.value=!0}function L(){i()}const O=s=>s?"success":"danger",i=async()=>{p.value=!0;try{const s={page:r.value.currentPage,per_page:r.value.perPage,search:m.value,state:C.value.state};d.value!==null&&d.value.value!==""&&(s.state=d.value.value);const l=await G.get("/horario",{params:s});g.value=l.data.data,r.value.currentPage=l.data.meta.current_page,r.value.total=l.data.meta.total}catch(s){console.error("Error al cargar horarios:",s),I.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los horarios",life:3e3})}finally{p.value=!1}},D=s=>{r.value.currentPage=s.page+1,r.value.perPage=s.rows,i()},F=W.debounce(()=>{r.value.currentPage=1,i()},500);return K(()=>{i()}),(s,l)=>(J(),q(Q,null,[e(a(T),{ref_key:"dt",ref:k,selection:w.value,"onUpdate:selection":l[2]||(l[2]=t=>w.value=t),value:g.value,dataKey:"id",paginator:!0,rows:r.value.perPage,totalRecords:r.value.total,loading:p.value,lazy:!0,onPage:D,rowsPerPageOptions:[15,20,25],scrollable:"",scrollHeight:"574px","responsive-layout":"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} horarios"},{header:u(()=>[c("div",Z,[l[6]||(l[6]=c("h4",{class:"m-0 text-lg font-bold"},"HORARIOS",-1)),c("div",ee,[e(a(A),{class:"w-full sm:w-72 md:w-96"},{default:u(()=>[e(a(B),null,{default:u(()=>[...l[5]||(l[5]=[c("i",{class:"pi pi-search"},null,-1)])]),_:1}),e(a(H),{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=t=>m.value=t),onInput:a(F),placeholder:"Buscar id, espacio, empleado...",class:"w-full"},null,8,["modelValue","onInput"])]),_:1}),e(a(N),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=t=>d.value=t),options:V.value,optionLabel:"name",placeholder:"Estado",class:"w-full sm:w-auto"},null,8,["modelValue","options"]),e(a(h),{icon:"pi pi-refresh",outlined:"",rounded:"","aria-label":"Refresh",onClick:i,class:"w-full sm:w-auto"})])])]),default:u(()=>[e(a(n),{selectionMode:"multiple",style:{width:"2rem"},exportable:!1}),e(a(n),{field:"id",header:"CÃ³digo Horario",sortable:"",style:{"min-width":"10rem"}}),e(a(n),{field:"fecha",header:"Fecha",sortable:"",style:{"min-width":"8rem"}}),e(a(n),{field:"fechaInicio",header:"Inicio",sortable:"",style:{"min-width":"8rem"}}),e(a(n),{field:"fechaFin",header:"Fin",sortable:"",style:{"min-width":"8rem"}}),e(a(n),{field:"espacio",header:"Espacio",sortable:"",style:{"min-width":"12rem"}}),e(a(n),{field:"empleado",header:"Empleado",sortable:"",style:{"min-width":"12rem"}}),e(a(n),{field:"state",header:"Estado",sortable:"",style:{"min-width":"8rem"}},{body:u(({data:t})=>[e(a(M),{value:t.state?"Activo":"Inactivo",severity:O(t.state)},null,8,["value","severity"])]),_:1}),e(a(n),{field:"actions",header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:u(t=>[c("div",ae,[e(a(h),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"p-button-sm",onClick:U=>$(t.data)},null,8,["onClick"]),e(a(h),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",class:"p-button-sm",onClick:U=>R(t.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","rows","totalRecords","loading"]),e(X,{visible:f.value,"onUpdate:visible":l[3]||(l[3]=t=>f.value=t),schedule:b.value,onDeleted:L},null,8,["visible","schedule"]),e(Y,{visible:v.value,"onUpdate:visible":l[4]||(l[4]=t=>v.value=t),scheduleId:y.value,onUpdated:E},null,8,["visible","scheduleId"])],64))}});export{ce as _};
