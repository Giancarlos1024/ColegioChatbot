import{s as g}from"./index-CIJ9kEDP.js";import{s as E,a as n}from"./index-8c4t-1rM.js";import{s as I,a as U}from"./index-CqE_d7Eh.js";import{s as N}from"./index-DWx6GgBR.js";import{d as V,r as o,aa as B,B as F,a2 as T,o as z,c as M,a as G,F as O,b as a,f as t,w as d,g as u}from"./app-CSI2DTQR.js";import{l as S}from"./lodash-B3zt2wbW.js";import{_ as j}from"./DeleteConfigAlerta.vue_vue_type_script_setup_true_lang-CpvgHy84.js";import{_ as K}from"./UpdateConfigAlerta.vue_vue_type_script_setup_true_lang-BPftSAMk.js";const q={class:"flex flex-col md:flex-row gap-2 items-start md:items-center justify-between w-full"},H={class:"flex flex-col sm:flex-row gap-2 w-full md:w-auto"},te=V({__name:"ListConfigAlerta",props:{refresh:{}},setup(h){const A=o(null),v=o([]),w=o(null),c=o(!1),f=o(""),p=o(!1),m=o(!1),b=o(null),C=o(null),P=h,x=B();F(()=>P.refresh,()=>i());function y(l){C.value=l.id??null,m.value=!0}function k(){i()}function _(l){l.id!==void 0&&(b.value=l,p.value=!0)}const s=o({currentPage:1,perPage:15,total:0});function R(){i()}const i=async()=>{c.value=!0;try{const l={page:s.value.currentPage,per_page:s.value.perPage,search:f.value},e=await T.get("/config_alerta",{params:l});v.value=e.data.data,s.value.currentPage=e.data.meta.current_page,s.value.total=e.data.meta.total}catch(l){console.error("Error al cargar las configuraciones de alerta:",l),x.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las configuraciones de alerta",life:3e3})}finally{c.value=!1}},L=l=>{s.value.currentPage=l.page+1,s.value.perPage=l.rows,i()},$=S.debounce(()=>{s.value.currentPage=1,i()},500);return z(()=>{i()}),(l,e)=>(G(),M(O,null,[a(t(E),{ref_key:"dt",ref:A,selection:w.value,"onUpdate:selection":e[1]||(e[1]=r=>w.value=r),value:v.value,dataKey:"id",paginator:!0,rows:s.value.perPage,totalRecords:s.value.total,loading:c.value,lazy:!0,onPage:L,rowsPerPageOptions:[15,20,25],scrollable:"",scrollDirection:"both",responsiveLayout:"scroll",class:"w-full text-sm sm:text-base",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} configuraciones"},{header:d(()=>[u("div",q,[e[5]||(e[5]=u("h4",{class:"m-0 text-base sm:text-lg md:text-xl"},"CONFIGURACIÓN DE ALERTAS",-1)),u("div",H,[a(t(I),{class:"w-full sm:w-64"},{default:d(()=>[a(t(U),null,{default:d(()=>[...e[4]||(e[4]=[u("i",{class:"pi pi-search"},null,-1)])]),_:1}),a(t(N),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),onInput:t($),placeholder:"Buscar por cantidad...",class:"w-full"},null,8,["modelValue","onInput"])]),_:1}),a(t(g),{title:"Refrescar",icon:"pi pi-refresh",outlined:"",rounded:"","aria-label":"Refresh",class:"w-full sm:w-auto",onClick:i})])])]),default:d(()=>[a(t(n),{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),a(t(n),{field:"id",header:"Código",sortable:"",style:{"min-width":"6rem"}}),a(t(n),{field:"amount",header:"Cantidad",sortable:"",style:{"min-width":"8rem"}}),a(t(n),{field:"time",header:"Tiempo",sortable:"",style:{"min-width":"8rem"}}),a(t(n),{field:"creacion",header:"Creación",sortable:"",style:{"min-width":"13rem"}}),a(t(n),{field:"actualizacion",header:"Actualización",sortable:"",style:{"min-width":"13rem"}}),a(t(n),{field:"actions",header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:d(r=>[a(t(g),{title:"Editar configuración",icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:D=>y(r.data)},null,8,["onClick"]),a(t(g),{title:"Eliminar configuración",icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:D=>_(r.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","rows","totalRecords","loading"]),a(j,{visible:p.value,"onUpdate:visible":e[2]||(e[2]=r=>p.value=r),configAlerta:b.value,onDeleted:R},null,8,["visible","configAlerta"]),a(K,{visible:m.value,"onUpdate:visible":e[3]||(e[3]=r=>m.value=r),configAlertaId:C.value,onUpdated:k},null,8,["visible","configAlertaId"])],64))}});export{te as _};
