import{u as D,_ as G}from"./AppConfigurator.vue_vue_type_script_setup_true_lang-DpDyjPj6.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as p,a as m,g as e,d as $,u as K,p as M,r as S,ac as H,B as N,ad as P,n as C,j as w,e as I,t as L,f as x,m as F,w as B,ae as U,_ as T,F as _,X as q,$ as V,R as z,b as A,af as W,k as j,T as X}from"./app-CSI2DTQR.js";const J={},Q={class:"layout-footer w-full bg-surface-100 dark:bg-surface-900 py-4 px-4 sm:px-6 md:px-8 text-center text-sm sm:text-base flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2"};function Y(t,n){return m(),p("div",Q,[...n[0]||(n[0]=[e("span",null,"Copyright Â© Sistema de Gestion de Talleres INIF 48 2025- Aamussem",-1)])])}const Z=R(J,[["render",Y]]),ee={key:0,class:"layout-menuitem-root-text"},te=["href","target"],se={class:"layout-menuitem-text"},ae={key:0,class:"pi pi-fw pi-angle-down layout-submenu-toggler"},oe={class:"layout-menuitem-text"},ie={class:"layout-submenu"},le=$({__name:"AppMenuItem",props:{item:{type:Object,default:()=>({})},index:{type:Number,default:0},root:{type:Boolean,default:!0},parentItemKey:{type:String,default:null}},setup(t){const n=t,c=K(),{layoutState:f,setActiveMenuItem:u,toggleMenu:k}=D(),i=M(()=>{var a;return!!((a=c.props.auth)!=null&&a.user)}),r=M(()=>{var a;return i.value&&((a=c.props.auth)!=null&&a.user)?c.props.auth.user:null}),v=S(!1),o=S(void 0);H(()=>{o.value=n.parentItemKey?`${n.parentItemKey}-${n.index}`:String(n.index);const a=f.activeMenuItem;v.value=a===o.value||!!a&&a.startsWith(o.value+"-")}),N(()=>f.activeMenuItem,a=>{const l=a;v.value=l===o.value||!!l&&l.startsWith(o.value+"-")});function s(a,l){if(l.requiresAuth&&!i.value){a.preventDefault(),window.location.href=route("login");return}if(l.permissions&&r.value&&!l.permissions.some(b=>{var E,O;return((O=(E=r.value)==null?void 0:E.permissions)==null?void 0:O.includes(b))??!1})){a.preventDefault();return}if(l.disabled){a.preventDefault();return}(l.to||l.url)&&(f.staticMenuMobileActive||f.overlayMenuActive)&&k(),l.command&&l.command({originalEvent:a,item:l});const h=l.items&&v.value?n.parentItemKey:o.value;h&&u(h)}function y(a){return c.url===a.to}function g(a){return a.requiresAuth&&!i.value||a.guestOnly&&i.value||a.permissions&&r.value&&!a.permissions.some(h=>{var d,b;return(b=(d=r.value)==null?void 0:d.permissions)==null?void 0:b.includes(h)})||a.roles&&r.value&&!a.roles.some(h=>{var d,b;return(b=(d=r.value)==null?void 0:d.roles)==null?void 0:b.includes(h)})?!1:a.visible!==!1}return(a,l)=>{const h=P("app-menu-item",!0);return m(),p("li",{class:C({"layout-root-menuitem":t.root,"active-menuitem":v.value})},[t.root&&g(t.item)?(m(),p("div",ee,L(t.item.label),1)):w("",!0),(!t.item.to||t.item.items)&&g(t.item)?(m(),p("a",{key:1,href:t.item.url,onClick:l[0]||(l[0]=d=>s(d,t.item)),class:C(t.item.class),target:t.item.target,tabindex:"0"},[e("i",{class:C([t.item.icon,"layout-menuitem-icon"])},null,2),e("span",se,L(t.item.label),1),t.item.items?(m(),p("i",ae)):w("",!0)],10,te)):w("",!0),t.item.to&&!t.item.items&&g(t.item)?(m(),I(x(F),{key:2,href:t.item.to,onClick:l[1]||(l[1]=d=>s(d,t.item)),class:C([t.item.class,{"active-route":y(t.item)}]),tabindex:"0",only:t.item.only||[],"preserve-state":t.item.preserveState||!1,"preserve-scroll":t.item.preserveScroll||!1},{default:B(()=>[e("i",{class:C([t.item.icon,"layout-menuitem-icon"])},null,2),e("span",oe,L(t.item.label),1)]),_:1},8,["href","class","only","preserve-state","preserve-scroll"])):w("",!0),t.item.items&&g(t.item)?(m(),I(U,{key:3,name:"layout-submenu"},{default:B(()=>[T(e("ul",ie,[(m(!0),p(_,null,q(t.item.items.filter(d=>g(d)),(d,b)=>(m(),I(h,{key:b,index:b,item:d,parentItemKey:o.value,root:!1},null,8,["index","item","parentItemKey"]))),128))],512),[[V,t.root?!0:v.value]])]),_:1})):w("",!0)],2)}}}),ne={class:"layout-menu"},re=$({__name:"AppMenu",setup(t){const n=K();console.log("ðŸ‘‰ AppMenu Â· page.props.auth:",n.props.auth);const c=M(()=>{var i,r;return((r=(i=n.props.auth)==null?void 0:i.user)==null?void 0:r.permissions)??[]}),f=M(()=>{var i,r;return((r=(i=n.props.auth)==null?void 0:i.user)==null?void 0:r.roles)??[]});z(()=>{console.log("ðŸ‘‰ AppMenu Â· roles:",f.value),console.log("ðŸ‘‰ AppMenu Â· permissions:",c.value)});const u=i=>{if(f.value.includes("administrador"))return console.log("âœ… Es administrador, acceso permitido a:",i),!0;const r=c.value.includes(i);return console.log(`ðŸ”Ž Checando permiso "${i}" ->`,r),r},k=M(()=>[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-fw pi-home",to:"/dashboard"}]},{label:"Gestion de Trabajo",items:[u("ver talleres")&&{label:"Gestion de talleres",icon:"pi pi-fw pi-briefcase",to:"/talleres"},u("ver horarios")&&{label:"Horarios",icon:"pi pi-fw pi-clock",to:"/horarios"}].filter(Boolean)},{label:"Usuarios y Seguridad",items:[u("ver usuarios")&&{label:"GestiÃ³n de Usuarios",icon:"pi pi-fw pi-user-edit",to:"/usuario"},u("ver roles")&&{label:"Roles",icon:"pi pi-fw pi-shield",to:"/roles"}].filter(Boolean)},{label:"Gestion de Alertas",items:[u("ver alertas")&&{label:"Alertas",icon:"pi pi-fw pi-bell",to:"/alertas"},u("ver configuraciones de alerta")&&{label:"ConfiguraciÃ³n de alertas",icon:"pi pi-fw pi-cog",to:"/config_alertas"}].filter(Boolean)},{label:"Asistente",items:[{label:"Asistente IA",icon:"pi pi-fw pi-home",to:"/asistente"}]}].filter(i=>i.items&&i.items.length>0));return(i,r)=>(m(),p("ul",ne,[(m(!0),p(_,null,q(k.value,(v,o)=>(m(),I(le,{key:o,item:v,index:o},null,8,["item","index"]))),128))]))}}),ue={class:"layout-sidebar"},ce=$({__name:"AppSidebar",setup(t){return(n,c)=>(m(),p("div",ue,[A(re)]))}}),me={class:"layout-topbar"},de={class:"layout-topbar-logo-container"},pe={class:"layout-topbar-actions"},fe={class:"layout-config-menu"},ve={class:"relative"},ye={type:"button",class:"layout-topbar-action layout-topbar-action-highlight"},be={class:"layout-topbar-menu-button layout-topbar-action"},ge={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},he=$({__name:"AppTopbar",setup(t){const{toggleMenu:n,toggleDarkMode:c,isDarkTheme:f}=D(),u=S(!1),k=()=>{j.post(route("logout"))},i=()=>{j.get("/settings/profile")},r=()=>{u.value=!0},v=()=>{u.value=!1};return(o,s)=>{const y=W("styleclass");return m(),p(_,null,[e("div",me,[e("div",de,[e("button",{class:"layout-menu-button layout-topbar-action",onClick:s[0]||(s[0]=(...g)=>x(n)&&x(n)(...g))},[...s[2]||(s[2]=[e("i",{class:"pi pi-bars"},null,-1)])]),A(x(F),{href:"/dashboard",class:"layout-topbar-logo flex items-center gap-2"},{default:B(()=>[...s[3]||(s[3]=[e("img",{src:"/imagenes/logoB.jpg",alt:"Admin Logo",class:"h-8 w-8 rounded-md object-cover"},null,-1),e("span",{class:"font-serif text-base font-semibold"},"Sistema de Inscripciones y gestion INIF 48",-1)])]),_:1})]),e("div",pe,[e("div",fe,[e("button",{type:"button",class:"layout-topbar-action",onClick:s[1]||(s[1]=(...g)=>x(c)&&x(c)(...g))},[e("i",{class:C(["pi",{"pi-moon":x(f),"pi-sun":!x(f)}])},null,2)]),e("div",ve,[T((m(),p("button",ye,[...s[4]||(s[4]=[e("i",{class:"pi pi-palette"},null,-1)])])),[[y,{selector:"@next",enterFromClass:"hidden",enterActiveClass:"animate-scalein",leaveToClass:"hidden",leaveActiveClass:"animate-fadeout",hideOnOutsideClick:!0}]]),A(G)])]),T((m(),p("button",be,[...s[5]||(s[5]=[e("i",{class:"pi pi-ellipsis-v"},null,-1)])])),[[y,{selector:"@next",enterFromClass:"hidden",enterActiveClass:"animate-scalein",leaveToClass:"hidden",leaveActiveClass:"animate-fadeout",hideOnOutsideClick:!0}]]),e("div",{class:"layout-topbar-menu hidden lg:block"},[e("div",{class:"layout-topbar-menu-content"},[e("button",{type:"button",class:"layout-topbar-action",onClick:i},[...s[6]||(s[6]=[e("i",{class:"pi pi-user"},null,-1),e("span",null,"Perfil",-1)])]),e("button",{type:"button",onClick:r,class:"layout-topbar-action"},[...s[7]||(s[7]=[e("i",{class:"pi pi-sign-out"},null,-1),e("span",null,"Cerrar",-1)])])])])])]),u.value?(m(),p("div",ge,[e("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 w-80"},[s[8]||(s[8]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," ConfirmaciÃ³n ",-1)),s[9]||(s[9]=e("p",{class:"text-gray-700 dark:text-gray-300 mb-6"}," Â¿EstÃ¡s seguro de que deseas salir del sistema? ",-1)),e("div",{class:"flex justify-center space-x-4"},[e("button",{onClick:k,class:"px-4 py-2 rounded text-white",style:{"background-color":"var(--primary-color)"}}," SÃ­, salir "),e("button",{onClick:v,class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white"}," Cancelar ")])])])):w("",!0)],64)}}}),xe={class:"layout-main-container"},ke={class:"layout-main"},Me=$({__name:"AppLayout",setup(t){const{layoutConfig:n,layoutState:c,isSidebarActive:f}=D(),u=S(null);N(f,o=>{o?i():r()});const k=M(()=>({"layout-overlay":n.menuMode==="overlay","layout-static":n.menuMode==="static","layout-static-inactive":c.staticMenuDesktopInactive&&n.menuMode==="static","layout-overlay-active":c.overlayMenuActive,"layout-mobile-active":c.staticMenuMobileActive}));function i(){u.value||(u.value=o=>{v(o)&&(c.overlayMenuActive=!1,c.staticMenuMobileActive=!1,c.menuHoverActive=!1)},document.addEventListener("click",u.value))}function r(){u.value&&(document.removeEventListener("click",u.value),u.value=null)}function v(o){const s=document.querySelector(".layout-sidebar"),y=document.querySelector(".layout-menu-button");return!s||!y?!1:!(s.isSameNode(o.target)||s.contains(o.target)||y.isSameNode(o.target)||y.contains(o.target))}return(o,s)=>{const y=P("Toast");return m(),p(_,null,[e("div",{class:C(["layout-wrapper",k.value])},[A(he),A(ce),e("div",xe,[e("div",ke,[X(o.$slots,"default")]),A(Z)]),s[0]||(s[0]=e("div",{class:"layout-mask animate-fadein"},null,-1))],2),A(y)],64)}}});export{Me as _};
