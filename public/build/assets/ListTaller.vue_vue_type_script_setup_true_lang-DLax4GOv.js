import{s as b}from"./index-CIJ9kEDP.js";import{s as A,a as s}from"./index-8c4t-1rM.js";import{s as B,a as F,b as x}from"./index-CqE_d7Eh.js";import{s as M}from"./index-DWx6GgBR.js";import{s as G}from"./index-DTrYfW8t.js";import{d as H,r as o,aa as j,B as E,a2 as z,o as K,c as q,a as J,F as Q,b as e,f as l,w as d,g as p}from"./app-CSI2DTQR.js";import{l as W}from"./lodash-B3zt2wbW.js";import{_ as X}from"./DeleteTaller.vue_vue_type_script_setup_true_lang-zuR2c-GB.js";import{_ as Y}from"./UpdateTaller.vue_vue_type_script_setup_true_lang-vNpzexKX.js";const Z={class:"flex flex-col md:flex-row gap-2 items-start md:items-center justify-between w-full"},ee={class:"flex flex-col sm:flex-row gap-2 w-full md:w-auto"},ue=H({__name:"ListTaller",props:{refresh:{}},setup(L){const _=o(null),h=o([]),y=o(null),f=o(!1),v=o(""),g=o(!1),w=o(!1),P=o(null),T=o(null),m=o(null),c=o(null),k=L,D=j(),V=o([{name:"TODOS",value:""},{name:"DISPONIBLES",value:"disponible"},{name:"LLENOS",value:"lleno"}]),$=o([{name:"TODOS",value:""},{name:"MAÑANA",value:"mañana"},{name:"TARDE",value:"tarde"}]);E(()=>k.refresh,()=>i()),E([m,c],()=>{n.value.currentPage=1,i()});const n=o({currentPage:1,perPage:15,total:0});function I(r){T.value=r.id??null,w.value=!0}function S(r){r.id&&(P.value=r,g.value=!0)}function C(){i()}function N(){i()}const i=async()=>{var r,t;f.value=!0;try{const a={page:n.value.currentPage,per_page:n.value.perPage,search:v.value,state:((r=m.value)==null?void 0:r.value)||((t=c.value)==null?void 0:t.value)},u=await z.get("/taller",{params:a});h.value=u.data.data,n.value.currentPage=u.data.meta.current_page,n.value.total=u.data.meta.total}catch(a){console.error("Error al cargar los talleres:",a),D.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los talleres",life:3e3})}finally{f.value=!1}},O=r=>{n.value.currentPage=r.page+1,n.value.perPage=r.rows,i()},R=r=>r==="disponible"?"success":"danger",U=W.debounce(()=>{n.value.currentPage=1,i()},500);return K(()=>{i()}),(r,t)=>(J(),q(Q,null,[e(l(A),{ref_key:"dt",ref:_,selection:y.value,"onUpdate:selection":t[3]||(t[3]=a=>y.value=a),value:h.value,dataKey:"id",paginator:!0,rows:n.value.perPage,totalRecords:n.value.total,loading:f.value,lazy:!0,onPage:O,rowsPerPageOptions:[15,20,25],scrollable:"",scrollDirection:"both",responsiveLayout:"scroll",class:"w-full text-sm sm:text-base",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} talleres"},{header:d(()=>[p("div",Z,[t[7]||(t[7]=p("h4",{class:"m-0 text-base sm:text-lg md:text-xl"},"GESTIÓN DE TALLERES",-1)),p("div",ee,[e(l(B),{class:"w-full sm:w-64"},{default:d(()=>[e(l(F),null,{default:d(()=>[...t[6]||(t[6]=[p("i",{class:"pi pi-search"},null,-1)])]),_:1}),e(l(M),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),onInput:l(U),placeholder:"Buscar taller...",class:"w-full"},null,8,["modelValue","onInput"])]),_:1}),e(l(x),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),options:V.value,optionLabel:"name",placeholder:"Estado",class:"w-full sm:w-40"},null,8,["modelValue","options"]),e(l(x),{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=a=>c.value=a),options:$.value,optionLabel:"name",placeholder:"Turno",class:"w-full sm:w-40"},null,8,["modelValue","options"]),e(l(b),{title:"Refrescar",icon:"pi pi-refresh",outlined:"",rounded:"",class:"w-full sm:w-auto",onClick:i})])])]),default:d(()=>[e(l(s),{selectionMode:"multiple",style:{width:"1rem"}}),e(l(s),{field:"nombre",header:"Nombre",sortable:"",style:{"min-width":"14rem"}}),e(l(s),{field:"turno",header:"Turno",sortable:"",style:{"min-width":"8rem"}}),e(l(s),{field:"sede",header:"Sede",sortable:"",style:{"min-width":"12rem"}}),e(l(s),{field:"hora_inicio",header:"Hora Inicio",sortable:"",style:{"min-width":"10rem"}}),e(l(s),{field:"hora_fin",header:"Hora Fin",sortable:"",style:{"min-width":"10rem"}}),e(l(s),{field:"fecha_inicio",header:"Inicio",sortable:"",style:{"min-width":"10rem"}}),e(l(s),{field:"fecha_fin",header:"Fin",sortable:"",style:{"min-width":"10rem"}}),e(l(s),{field:"capacidad_alumnos",header:"Capacidad",sortable:"",style:{"min-width":"8rem"}}),e(l(s),{field:"estado",header:"Estado",sortable:"",style:{"min-width":"10rem"}},{body:d(({data:a})=>[e(l(G),{value:a.estado,severity:R(a.estado)},null,8,["value","severity"])]),_:1}),e(l(s),{header:"Acciones",style:{"min-width":"10rem"}},{body:d(a=>[e(l(b),{title:"Editar",icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:u=>I(a.data)},null,8,["onClick"]),e(l(b),{title:"Eliminar",icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:u=>S(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","rows","totalRecords","loading"]),e(X,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=a=>g.value=a),taller:P.value,onDeleted:N},null,8,["visible","taller"]),e(Y,{visible:w.value,"onUpdate:visible":t[5]||(t[5]=a=>w.value=a),tallerId:T.value,onUpdated:C},null,8,["visible","tallerId"])],64))}});export{ue as _};
