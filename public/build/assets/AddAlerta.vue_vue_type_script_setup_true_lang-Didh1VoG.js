import{d as C,aa as N,r as p,c as i,a as u,F as D,b as t,f as o,w as f,g as l,j as c,i as y,t as v,a2 as E}from"./app-CSI2DTQR.js";import{s as U}from"./index-Bd5u6C13.js";import{s as $}from"./index-C_q0UAfk.js";import{s as g}from"./index-CIJ9kEDP.js";import{s as b}from"./index-DWx6GgBR.js";import{_ as B}from"./AddCAlert.vue_vue_type_script_setup_true_lang-CHCCQng5.js";const F={class:"flex flex-col gap-6"},T={class:"grid grid-cols-12 gap-4"},I={class:"col-span-12"},M={key:0,class:"text-red-500"},R={key:1,class:"text-red-500"},j={class:"col-span-12"},G={key:0,class:"text-red-500"},L={class:"col-span-12"},P={key:0,class:"text-red-500"},S={key:1,class:"text-red-500"},Q=C({__name:"AddAlerta",emits:["alerta-agregada"],setup(W,{emit:k}){const x=N(),n=p(!1),m=p(!1),s=p({}),V=k,a=p({titulo:"",descripcion:"",fecha:""});function w(){h(),m.value=!0}function _(){m.value=!1,h()}function h(){a.value={titulo:"",descripcion:"",fecha:""},s.value={},n.value=!1}function A(){n.value=!0,s.value={},!(!a.value.titulo||!a.value.fecha)&&(console.log("Payload enviado:",a.value),E.post("/alerta",a.value).then(()=>{x.add({severity:"success",summary:"Éxito",detail:"Alerta registrada",life:3e3}),_(),V("alerta-agregada")}).catch(d=>{var e;console.log("Respuesta error /alerta:",(e=d.response)==null?void 0:e.data),d.response&&d.response.status===422?s.value=d.response.data.errors||{}:x.add({severity:"error",summary:"Error",detail:"No se pudo registrar la alerta",life:3e3})}))}return(d,e)=>(u(),i(D,null,[t(o($),{class:"mb-6"},{start:f(()=>[t(o(g),{label:"Nueva Alerta",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:w})]),end:f(()=>[t(B)]),_:1}),t(o(U),{visible:m.value,"onUpdate:visible":e[3]||(e[3]=r=>m.value=r),modal:!0,style:{width:"95vw",maxWidth:"600px"},header:"Registro de Alerta",class:"w-full max-w-full sm:max-w-lg"},{footer:f(()=>[t(o(g),{label:"Cancelar",icon:"pi pi-times",text:"",class:"mr-2",onClick:_}),t(o(g),{label:"Guardar",icon:"pi pi-check",onClick:A})]),default:f(()=>[l("div",F,[l("div",T,[l("div",I,[e[4]||(e[4]=l("label",{class:"block font-bold mb-2"},[y(" Título "),l("span",{class:"text-red-500"},"*")],-1)),t(o(b),{modelValue:a.value.titulo,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.titulo=r),modelModifiers:{trim:!0},placeholder:"Ingrese título de la alerta",class:"w-full"},null,8,["modelValue"]),n.value&&!a.value.titulo?(u(),i("small",M," El título es obligatorio. ")):c("",!0),s.value.titulo?(u(),i("small",R,v(s.value.titulo[0]),1)):c("",!0)]),l("div",j,[e[5]||(e[5]=l("label",{class:"block font-bold mb-2"},"Descripción",-1)),t(o(b),{modelValue:a.value.descripcion,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.descripcion=r),modelModifiers:{trim:!0},placeholder:"Ingrese descripción",class:"w-full"},null,8,["modelValue"]),s.value.descripcion?(u(),i("small",G,v(s.value.descripcion[0]),1)):c("",!0)]),l("div",L,[e[6]||(e[6]=l("label",{class:"block font-bold mb-2"},[y(" Fecha "),l("span",{class:"text-red-500"},"*")],-1)),t(o(b),{type:"date",modelValue:a.value.fecha,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.fecha=r),class:"w-full"},null,8,["modelValue"]),n.value&&!a.value.fecha?(u(),i("small",P," La fecha es obligatoria. ")):c("",!0),s.value.fecha?(u(),i("small",S,v(s.value.fecha[0]),1)):c("",!0)])])])]),_:1},8,["visible"])],64))}});export{Q as _};
