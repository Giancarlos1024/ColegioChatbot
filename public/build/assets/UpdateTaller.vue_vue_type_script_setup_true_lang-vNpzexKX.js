import{s as H}from"./index-Bd5u6C13.js";import{s as V}from"./index-DWx6GgBR.js";import{s as y}from"./index-FxFNUawP.js";import{b as I}from"./index-CqE_d7Eh.js";import{s as x}from"./index-D76Ize-A.js";import{s as k}from"./index-CIJ9kEDP.js";import{s as N}from"./index-DTrYfW8t.js";import{d as M,aa as D,r as b,B as g,a2 as U,e as j,a as d,w as T,g as o,b as t,c as r,j as u,f as i,n as c,t as m}from"./app-CSI2DTQR.js";import{s as F}from"./index-C4jvCa1H.js";const R={class:"grid grid-cols-12 gap-4"},A={class:"col-span-12"},G={key:0,class:"text-red-500"},L={class:"col-span-12 md:col-span-4"},S={key:0,class:"text-red-500"},W={class:"col-span-6 md:col-span-4"},J={key:0,class:"text-red-500"},K={class:"col-span-6 md:col-span-4"},O={key:0,class:"text-red-500"},P={class:"col-span-12 md:col-span-6"},Q={key:0,class:"text-red-500"},X={class:"col-span-12 md:col-span-3"},Y={key:0,class:"text-red-500"},Z={class:"col-span-12 md:col-span-3"},ll={key:0,class:"text-red-500"},al={class:"col-span-12 md:col-span-3"},el={key:0,class:"text-red-500"},sl={class:"col-span-12 md:col-span-3"},ol={class:"col-span-12"},il={class:"col-span-12"},tl={class:"col-span-12"},nl={class:"flex justify-end gap-2"},_l=M({__name:"UpdateTaller",props:{visible:{type:Boolean},tallerId:{}},emits:["update:visible","updated"],setup($,{emit:q}){const p=$,w=q,_=D(),v=b(p.visible),C=b(!1),h=b(!1),a=b({nombre:"",turno:"",hora_inicio:"",hora_fin:"",sede:"",fecha_inicio:null,fecha_fin:null,capacidad_alumnos:null,descripcion:"",requisitos:"",temario:"",estado:""}),E=[{label:"Ma침ana",value:"ma침ana"},{label:"Tarde",value:"tarde"}],s=b({});g(()=>p.visible,n=>{v.value=n,n&&p.tallerId&&z()}),g(v,n=>w("update:visible",n));const z=async()=>{h.value=!0,s.value={};try{const l=(await U.get(`/taller/${p.tallerId}`)).data.taller,e=f=>f?new Date(f+"T00:00:00"):null;a.value={nombre:l.nombre,turno:l.turno,hora_inicio:l.hora_inicio,hora_fin:l.hora_fin,sede:l.sede,fecha_inicio:e(l.fecha_inicio),fecha_fin:e(l.fecha_fin),capacidad_alumnos:l.capacidad_alumnos,descripcion:l.descripcion,requisitos:l.requisitos,temario:l.temario,estado:l.estado,creacion:l.creacion,actualizacion:l.actualizacion}}catch(n){console.error(n),_.add({severity:"error",summary:"Error",detail:"No se pudo cargar el taller",life:3e3})}finally{h.value=!1}},B=async()=>{var n,l;C.value=!0,s.value={};try{const e={nombre:a.value.nombre,turno:a.value.turno,hora_inicio:a.value.hora_inicio,hora_fin:a.value.hora_fin,sede:a.value.sede,fecha_inicio:a.value.fecha_inicio,fecha_fin:a.value.fecha_fin,capacidad_alumnos:a.value.capacidad_alumnos,descripcion:a.value.descripcion,requisitos:a.value.requisitos,temario:a.value.temario};await U.put(`/taller/${p.tallerId}`,e),_.add({severity:"success",summary:"Actualizado",detail:"Taller actualizado correctamente",life:3e3}),v.value=!1,w("updated")}catch(e){const f=e;(l=(n=f.response)==null?void 0:n.data)!=null&&l.errors?(s.value=f.response.data.errors,_.add({severity:"error",summary:"Error de validaci칩n",detail:"Revisa los campos e intenta nuevamente.",life:5e3})):_.add({severity:"error",summary:"Error",detail:"No se pudo actualizar el taller",life:3e3})}};return(n,l)=>(d(),j(i(H),{visible:v.value,"onUpdate:visible":l[12]||(l[12]=e=>v.value=e),modal:"",header:"Editar Taller",style:{width:"95vw",maxWidth:"800px"}},{footer:T(()=>[o("div",nl,[t(i(k),{label:"Cancelar",icon:"pi pi-times",text:"",onClick:l[11]||(l[11]=e=>v.value=!1)}),t(i(k),{label:"Guardar",icon:"pi pi-check",loading:h.value,onClick:B},null,8,["loading"])])]),default:T(()=>[o("div",R,[o("div",A,[l[13]||(l[13]=o("label",{class:"font-bold"},"Nombre *",-1)),t(i(V),{modelValue:a.value.nombre,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.nombre=e),class:c(["w-full",{"p-invalid":s.value.nombre}])},null,8,["modelValue","class"]),s.value.nombre?(d(),r("small",G,m(s.value.nombre[0]),1)):u("",!0)]),o("div",L,[l[14]||(l[14]=o("label",{class:"font-bold"},"Turno *",-1)),t(i(I),{modelValue:a.value.turno,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.turno=e),options:E,optionLabel:"label",optionValue:"value",class:c(["w-full",{"p-invalid":s.value.turno}])},null,8,["modelValue","class"]),s.value.turno?(d(),r("small",S,m(s.value.turno[0]),1)):u("",!0)]),o("div",W,[l[15]||(l[15]=o("label",{class:"font-bold"},"Hora de inicio *",-1)),t(i(V),{modelValue:a.value.hora_inicio,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.hora_inicio=e),placeholder:"HH:MM",class:c(["w-full",{"p-invalid":s.value.hora_inicio}])},null,8,["modelValue","class"]),s.value.hora_inicio?(d(),r("small",J,m(s.value.hora_inicio[0]),1)):u("",!0)]),o("div",K,[l[16]||(l[16]=o("label",{class:"font-bold"},"Hora de fin *",-1)),t(i(V),{modelValue:a.value.hora_fin,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.hora_fin=e),placeholder:"HH:MM",class:c(["w-full",{"p-invalid":s.value.hora_fin}])},null,8,["modelValue","class"]),s.value.hora_fin?(d(),r("small",O,m(s.value.hora_fin[0]),1)):u("",!0)]),o("div",P,[l[17]||(l[17]=o("label",{class:"font-bold"},"Sede *",-1)),t(i(V),{modelValue:a.value.sede,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.sede=e),class:c(["w-full",{"p-invalid":s.value.sede}])},null,8,["modelValue","class"]),s.value.sede?(d(),r("small",Q,m(s.value.sede[0]),1)):u("",!0)]),o("div",X,[l[18]||(l[18]=o("label",{class:"font-bold"},"Fecha inicio *",-1)),t(i(x),{modelValue:a.value.fecha_inicio,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.fecha_inicio=e),showIcon:"",class:c(["w-full",{"p-invalid":s.value.fecha_inicio}])},null,8,["modelValue","class"]),s.value.fecha_inicio?(d(),r("small",Y,m(s.value.fecha_inicio[0]),1)):u("",!0)]),o("div",Z,[l[19]||(l[19]=o("label",{class:"font-bold"},"Fecha fin *",-1)),t(i(x),{modelValue:a.value.fecha_fin,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.fecha_fin=e),showIcon:"",class:c(["w-full",{"p-invalid":s.value.fecha_fin}])},null,8,["modelValue","class"]),s.value.fecha_fin?(d(),r("small",ll,m(s.value.fecha_fin[0]),1)):u("",!0)]),o("div",al,[l[20]||(l[20]=o("label",{class:"font-bold"},"Capacidad *",-1)),t(i(F),{modelValue:a.value.capacidad_alumnos,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value.capacidad_alumnos=e),min:1,max:50,class:c(["w-full",{"p-invalid":s.value.capacidad_alumnos}])},null,8,["modelValue","class"]),s.value.capacidad_alumnos?(d(),r("small",el,m(s.value.capacidad_alumnos[0]),1)):u("",!0)]),o("div",sl,[l[21]||(l[21]=o("label",{class:"font-bold"},"Estado",-1)),t(i(N),{value:a.value.estado,severity:a.value.estado==="disponible"?"success":"danger"},null,8,["value","severity"])]),o("div",ol,[l[22]||(l[22]=o("label",{class:"font-bold"},"Descripci칩n",-1)),t(i(y),{modelValue:a.value.descripcion,"onUpdate:modelValue":l[8]||(l[8]=e=>a.value.descripcion=e),rows:"3",class:"w-full"},null,8,["modelValue"])]),o("div",il,[l[23]||(l[23]=o("label",{class:"font-bold"},"Requisitos",-1)),t(i(y),{modelValue:a.value.requisitos,"onUpdate:modelValue":l[9]||(l[9]=e=>a.value.requisitos=e),rows:"3",class:"w-full"},null,8,["modelValue"])]),o("div",tl,[l[24]||(l[24]=o("label",{class:"font-bold"},"Temario",-1)),t(i(y),{modelValue:a.value.temario,"onUpdate:modelValue":l[10]||(l[10]=e=>a.value.temario=e),rows:"3",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]))}});export{_l as _};
