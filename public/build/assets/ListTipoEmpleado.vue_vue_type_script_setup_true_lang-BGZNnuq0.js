import{s as g}from"./index-CIJ9kEDP.js";import{s as A,a as d}from"./index-8c4t-1rM.js";import{s as B,a as N,b as S}from"./index-CqE_d7Eh.js";import{s as F}from"./index-DWx6GgBR.js";import{s as z}from"./index-DTrYfW8t.js";import{d as M,r as s,B as h,a2 as j,o as G,c as H,a as K,F as q,b as l,f as o,w as p,g as u}from"./app-CSI2DTQR.js";import{l as J}from"./lodash-B3zt2wbW.js";import{_ as Q}from"./DeleteTipoEmpleado.vue_vue_type_script_setup_true_lang-DcZquhp5.js";import{_ as W}from"./UpdateTipoEmpleado.vue_vue_type_script_setup_true_lang-BLQnmEjP.js";const X={class:"flex flex-wrap gap-2 items-center justify-between"},Y={class:"flex flex-wrap gap-2 w-full md:w-auto"},Z={class:"flex flex-wrap gap-1"},de=M({__name:"ListTipoEmpleado",props:{refresh:{}},setup(y){const T=y,x=s(null),w=s([]),b=s(null),c=s(!1),m=s(""),v=s(!1),E=s(null),P=s(null),n=s(null),f=s(!1),_=s(1);h(()=>T.refresh,()=>i()),h(()=>n.value,()=>{_.value=1,i()});const k=s([{name:"TODOS",value:""},{name:"ACTIVOS",value:1},{name:"INACTIVOS",value:0}]),r=s({currentPage:1,perPage:15,total:0}),V=s({state:null}),C=a=>{P.value=a.id,f.value=!0},$=a=>{E.value=a,v.value=!0},I=()=>i(),L=()=>i(),i=async()=>{c.value=!0;try{const a={page:r.value.currentPage,per_page:r.value.perPage,search:m.value,state:V.value.state};n.value!==null&&n.value.value!==""&&(a.state=n.value.value);const e=await j.get("/tipo_empleado",{params:a});w.value=e.data.data,r.value.currentPage=e.data.meta.current_page,r.value.total=e.data.meta.total}catch(a){console.error("Error al cargar tipos empleados:",a)}finally{c.value=!1}},D=a=>{r.value.currentPage=a.page+1,r.value.perPage=a.rows,i()},R=a=>a===!0||a===1?"success":a===!1||a===0?"danger":void 0,U=J.debounce(()=>{r.value.currentPage=1,i()},500);return G(()=>i()),(a,e)=>(K(),H(q,null,[l(o(A),{ref_key:"dt",ref:x,selection:b.value,"onUpdate:selection":e[2]||(e[2]=t=>b.value=t),value:w.value,dataKey:"id",paginator:!0,rows:r.value.perPage,totalRecords:r.value.total,loading:c.value,lazy:!0,onPage:D,rowsPerPageOptions:[15,20,25],scrollable:"",scrollHeight:"574px",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} tipos de empleados",class:"w-full"},{header:p(()=>[u("div",X,[e[6]||(e[6]=u("h4",{class:"m-0"},"Tipos Empleados",-1)),u("div",Y,[l(o(B),{class:"flex-1 min-w-[150px]"},{default:p(()=>[l(o(N),null,{default:p(()=>[...e[5]||(e[5]=[u("i",{class:"pi pi-search"},null,-1)])]),_:1}),l(o(F),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),onInput:o(U),placeholder:"Buscar tipo empleado...",class:"w-full"},null,8,["modelValue","onInput"])]),_:1}),l(o(S),{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),options:k.value,optionLabel:"name",placeholder:"Estado del tipo empleado",class:"w-full md:w-auto"},null,8,["modelValue","options"]),l(o(g),{icon:"pi pi-refresh",outlined:"",rounded:"","aria-label":"Refresh",onClick:i})])])]),default:p(()=>[l(o(d),{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),l(o(d),{field:"name",header:"Nombre",sortable:"",style:{"min-width":"13rem"}}),l(o(d),{field:"creacion",header:"Creación",sortable:"",style:{"min-width":"13rem"}}),l(o(d),{field:"actualizacion",header:"Actualización",sortable:"",style:{"min-width":"13rem"}}),l(o(d),{field:"state",header:"Estado",sortable:"",style:{"min-width":"4rem"}},{body:p(({data:t})=>[l(o(z),{value:t.state?"Activo":"Inactivo",severity:R(t.state)},null,8,["value","severity"])]),_:1}),l(o(d),{field:"accions",header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:p(t=>[u("div",Z,[l(o(g),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-1",onClick:O=>C(t.data)},null,8,["onClick"]),l(o(g),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:O=>$(t.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","rows","totalRecords","loading"]),l(Q,{visible:v.value,"onUpdate:visible":e[3]||(e[3]=t=>v.value=t),tipoEmpleado:E.value,onDeleted:L},null,8,["visible","tipoEmpleado"]),l(W,{visible:f.value,"onUpdate:visible":e[4]||(e[4]=t=>f.value=t),tipoEmpleadoId:P.value,onUpdated:I},null,8,["visible","tipoEmpleadoId"])],64))}});export{de as _};
