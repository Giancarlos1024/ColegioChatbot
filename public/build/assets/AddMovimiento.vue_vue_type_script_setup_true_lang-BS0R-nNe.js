import{d as N,r as u,aa as P,c as n,a as r,F,b as i,f as t,w as f,g as l,j as c,i as h,t as m,a2 as k}from"./app-CSI2DTQR.js";import{s as $}from"./index-Bd5u6C13.js";import{s as B}from"./index-C_q0UAfk.js";import{s as V}from"./index-CIJ9kEDP.js";import{s as b}from"./index-DWx6GgBR.js";import{s as R}from"./index-BsSS1dRr.js";import{s as w}from"./index-6IO2ceo-.js";import D from"./toolsMovement-DZPGYnhY.js";const A={class:"flex flex-col gap-6"},L={class:"grid grid-cols-12 gap-4"},j={class:"col-span-12"},G={key:0,class:"text-red-500"},H={key:1,class:"text-red-500"},I={class:"col-span-12"},W={key:0,class:"text-red-500"},q={key:1,class:"text-red-500"},z={class:"col-span-12 sm:col-span-6 flex items-center gap-2"},J={class:"col-span-12 sm:col-span-6 flex items-center gap-2"},K={class:"col-span-12"},O={key:0,class:"text-red-500"},Q={class:"col-span-12"},X={key:0,class:"text-red-500"},Y={class:"col-span-12"},Z={key:0,class:"text-red-500"},ee={class:"col-span-12"},oe={key:0,class:"text-red-500"},ue=N({__name:"AddMovimiento",emits:["movimiento-agregado"],setup(le,{emit:_}){const T=u([{label:"Cara",value:1},{label:"Huella",value:2}]),E=P(),p=u(!1),v=u(!1),s=u({}),g=u([]),S=_,o=u({idEspacio:null,idTipo:null,reconocido:!1,access:!1,error:"",fechaEnvioESP32:"",fechaRecepcion:"",fechaReconocimiento:""});function M(){y(),v.value=!0,U()}function x(){v.value=!1,y()}function y(){o.value={idEspacio:null,idTipo:null,reconocido:!1,access:!1,error:"",fechaEnvioESP32:"",fechaRecepcion:"",fechaReconocimiento:""},s.value={},p.value=!1}function U(){k.get("/espacio",{params:{state:1}}).then(d=>{g.value=d.data.data}).catch(()=>{E.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los espacios",life:3e3})})}function C(){p.value=!0,s.value={},!(!o.value.idEspacio||!o.value.idTipo)&&k.post("/movimiento",o.value).then(()=>{E.add({severity:"success",summary:"Éxito",detail:"Movimiento registrado",life:3e3}),x(),S("movimiento-agregado")}).catch(d=>{d.response&&d.response.status===422?s.value=d.response.data.errors||{}:E.add({severity:"error",summary:"Error",detail:"No se pudo registrar el movimiento",life:3e3})})}return(d,e)=>(r(),n(F,null,[i(t(B),{class:"mb-6"},{start:f(()=>[i(t(V),{label:"Nuevo Movimiento",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:M})]),end:f(()=>[i(D)]),_:1}),i(t($),{visible:v.value,"onUpdate:visible":e[8]||(e[8]=a=>v.value=a),modal:!0,style:{width:"95vw",maxWidth:"600px"},header:"Registro de Movimiento",class:"w-full max-w-full sm:max-w-lg"},{footer:f(()=>[i(t(V),{label:"Cancelar",icon:"pi pi-times",text:"",class:"mr-2",onClick:x}),i(t(V),{label:"Guardar",icon:"pi pi-check",onClick:C})]),default:f(()=>[l("div",A,[l("div",L,[l("div",j,[e[9]||(e[9]=l("label",{class:"block font-bold mb-2"},[h("Espacio "),l("span",{class:"text-red-500"},"*")],-1)),i(t(w),{modelValue:o.value.idEspacio,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.idEspacio=a),options:g.value,optionLabel:"name",optionValue:"id",placeholder:"Seleccione un espacio",class:"w-full",filter:"",filterPlaceholder:"Buscar espacio"},null,8,["modelValue","options"]),p.value&&!o.value.idEspacio?(r(),n("small",G,"Debe seleccionar un espacio.")):c("",!0),s.value.idEspacio?(r(),n("small",H,m(s.value.idEspacio[0]),1)):c("",!0)]),l("div",I,[e[10]||(e[10]=l("label",{class:"block font-bold mb-2"},[h("Tipo "),l("span",{class:"text-red-500"},"*")],-1)),i(t(w),{modelValue:o.value.idTipo,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.idTipo=a),options:T.value,optionLabel:"label",optionValue:"value",placeholder:"Seleccione un tipo",class:"w-full"},null,8,["modelValue","options"]),p.value&&!o.value.idTipo?(r(),n("small",W,"El tipo es obligatorio.")):c("",!0),s.value.idTipo?(r(),n("small",q,m(s.value.idTipo[0]),1)):c("",!0)]),l("div",z,[i(t(R),{modelValue:o.value.reconocido,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.reconocido=a),binary:!0},null,8,["modelValue"]),e[11]||(e[11]=l("label",{class:"font-bold"},"Reconocido",-1))]),l("div",J,[i(t(R),{modelValue:o.value.access,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.access=a),binary:!0},null,8,["modelValue"]),e[12]||(e[12]=l("label",{class:"font-bold"},"Acceso",-1))]),l("div",K,[e[13]||(e[13]=l("label",{class:"block font-bold mb-2"},"Error",-1)),i(t(b),{modelValue:o.value.error,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.error=a),modelModifiers:{trim:!0},maxlength:"3",placeholder:"Ingrese código de error",class:"w-full"},null,8,["modelValue"]),s.value.error?(r(),n("small",O,m(s.value.error[0]),1)):c("",!0)]),l("div",Q,[e[14]||(e[14]=l("label",{class:"block font-bold mb-2"},"Fecha Envío ESP32",-1)),i(t(b),{type:"datetime-local",modelValue:o.value.fechaEnvioESP32,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.fechaEnvioESP32=a),class:"w-full"},null,8,["modelValue"]),s.value.fechaEnvioESP32?(r(),n("small",X,m(s.value.fechaEnvioESP32[0]),1)):c("",!0)]),l("div",Y,[e[15]||(e[15]=l("label",{class:"block font-bold mb-2"},"Fecha Recepción",-1)),i(t(b),{type:"datetime-local",modelValue:o.value.fechaRecepcion,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.fechaRecepcion=a),class:"w-full"},null,8,["modelValue"]),s.value.fechaRecepcion?(r(),n("small",Z,m(s.value.fechaRecepcion[0]),1)):c("",!0)]),l("div",ee,[e[16]||(e[16]=l("label",{class:"block font-bold mb-2"},"Fecha Reconocimiento",-1)),i(t(b),{type:"datetime-local",modelValue:o.value.fechaReconocimiento,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.fechaReconocimiento=a),class:"w-full"},null,8,["modelValue"]),s.value.fechaReconocimiento?(r(),n("small",oe,m(s.value.fechaReconocimiento[0]),1)):c("",!0)])])])]),_:1},8,["visible"])],64))}});export{ue as _};
