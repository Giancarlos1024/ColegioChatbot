import{d as $,aa as B,r as p,c as d,a as r,F as D,b as i,f as c,w as b,g as l,j as u,i as m,t as f,a2 as x}from"./app-CSI2DTQR.js";import{s as L}from"./index-Bd5u6C13.js";import{s as H}from"./index-C_q0UAfk.js";import{s as y}from"./index-CIJ9kEDP.js";import{s as g}from"./index-DWx6GgBR.js";import{s as q}from"./index-BsSS1dRr.js";import{s as T}from"./index-DTrYfW8t.js";import{s as w}from"./index-6IO2ceo-.js";import j from"./toolsSchedule-iqHLfYGl.js";const A={class:"flex flex-col gap-6"},P={class:"grid grid-cols-12 gap-4"},G={class:"col-span-12 md:col-span-4"},R={key:0,class:"text-red-500"},W={key:1,class:"text-red-500"},z={class:"col-span-12 md:col-span-4"},J={key:0,class:"text-red-500"},K={key:1,class:"text-red-500"},M={class:"col-span-12 md:col-span-4"},O={key:0,class:"text-red-500"},Q={key:1,class:"text-red-500"},X={class:"col-span-12 md:col-span-6"},Y={key:0,class:"text-red-500"},Z={key:1,class:"text-red-500"},ee={class:"col-span-12 md:col-span-6"},ae={key:0,class:"text-red-500"},le={key:1,class:"text-red-500"},se={class:"col-span-12"},oe={class:"flex items-center gap-3"},te={key:0,class:"text-red-500"},ie={class:"flex flex-col sm:flex-row gap-2 w-full sm:justify-end"},be=$({__name:"AddHorario",emits:["schedule-agregado"],setup(de,{emit:F}){const v=B(),n=p(!1),h=p(!1),o=p({}),E=p([]),_=p([]),a=p({fecha:"",fechaInicio:"",fechaFin:"",idEspacio:null,idEmpleado:null,state:!0}),I=F;function V(){a.value={fecha:"",fechaInicio:"",fechaFin:"",idEspacio:null,idEmpleado:null,state:!0},o.value={},n.value=!1}function N(){V(),h.value=!0,C(),U()}function k(){h.value=!1,V()}function C(){x.get("/espacio",{params:{state:1}}).then(s=>{console.log("✅ Espacios cargados:",s.data),E.value=s.data.data}).catch(s=>{console.error("❌ Error espacios:",s.response??s),v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los espacios",life:3e3})})}function U(){x.get("/empleado",{params:{state:1}}).then(s=>{console.log("✅ Empleados cargados:",s.data),_.value=s.data.data.map(e=>({...e,nameFull:e.name+" "+e.apellido}))}).catch(s=>{console.error("❌ Error empleados:",s.response??s),v.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los empleados",life:3e3})})}function S(){n.value=!0,o.value={},!(!a.value.fecha||!a.value.fechaInicio||!a.value.fechaFin||!a.value.idEspacio||!a.value.idEmpleado)&&x.post("/horario",a.value).then(()=>{v.add({severity:"success",summary:"Éxito",detail:"Horario registrado",life:3e3}),k(),I("schedule-agregado")}).catch(s=>{var e;((e=s.response)==null?void 0:e.status)===422&&s.response.data.errors?o.value=s.response.data.errors:v.add({severity:"error",summary:"Error",detail:"No se pudo registrar el horario",life:3e3})})}return(s,e)=>(r(),d(D,null,[i(c(H),{class:"mb-6"},{start:b(()=>[i(c(y),{label:"Nuevo horario",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:N})]),end:b(()=>[i(j)]),_:1}),i(c(L),{visible:h.value,"onUpdate:visible":e[6]||(e[6]=t=>h.value=t),header:"Registro de horario",modal:"",style:{width:"95vw",maxWidth:"700px"}},{footer:b(()=>[l("div",ie,[i(c(y),{label:"Cancelar",icon:"pi pi-times",text:"",class:"w-full sm:w-auto",onClick:k}),i(c(y),{label:"Guardar",icon:"pi pi-check",onClick:S,class:"w-full sm:w-auto"})])]),default:b(()=>[l("div",A,[l("div",P,[l("div",G,[e[7]||(e[7]=l("label",{class:"block font-bold mb-2"},[m("Fecha "),l("span",{class:"text-red-500"},"*")],-1)),i(c(g),{modelValue:a.value.fecha,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.fecha=t),type:"date",required:"",fluid:"",class:"w-full"},null,8,["modelValue"]),n.value&&!a.value.fecha?(r(),d("small",R,"La fecha es obligatoria.")):u("",!0),o.value.fecha?(r(),d("small",W,f(o.value.fecha[0]),1)):u("",!0)]),l("div",z,[e[8]||(e[8]=l("label",{class:"block font-bold mb-2"},[m("Fecha y Hora Inicio "),l("span",{class:"text-red-500"},"*")],-1)),i(c(g),{modelValue:a.value.fechaInicio,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.fechaInicio=t),type:"datetime-local",required:"",fluid:"",class:"w-full"},null,8,["modelValue"]),n.value&&!a.value.fechaInicio?(r(),d("small",J,"La fecha de inicio es obligatoria.")):u("",!0),o.value.fechaInicio?(r(),d("small",K,f(o.value.fechaInicio[0]),1)):u("",!0)]),l("div",M,[e[9]||(e[9]=l("label",{class:"block font-bold mb-2"},[m("Fecha y Hora Fin "),l("span",{class:"text-red-500"},"*")],-1)),i(c(g),{modelValue:a.value.fechaFin,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.fechaFin=t),type:"datetime-local",required:"",fluid:"",class:"w-full"},null,8,["modelValue"]),n.value&&!a.value.fechaFin?(r(),d("small",O,"La fecha de fin es obligatoria.")):u("",!0),o.value.fechaFin?(r(),d("small",Q,f(o.value.fechaFin[0]),1)):u("",!0)]),l("div",X,[e[10]||(e[10]=l("label",{class:"block font-bold mb-2"},[m("Espacio "),l("span",{class:"text-red-500"},"*")],-1)),i(c(w),{modelValue:a.value.idEspacio,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.idEspacio=t),options:E.value,optionLabel:"name",optionValue:"id",placeholder:"Seleccione un espacio",fluid:"",filter:"",filterPlaceholder:"Buscar espacio",class:"w-full"},null,8,["modelValue","options"]),n.value&&!a.value.idEspacio?(r(),d("small",Y,"Debe seleccionar un espacio.")):u("",!0),o.value.idEspacio?(r(),d("small",Z,f(o.value.idEspacio[0]),1)):u("",!0)]),l("div",ee,[e[11]||(e[11]=l("label",{class:"block font-bold mb-2"},[m("Empleado "),l("span",{class:"text-red-500"},"*")],-1)),i(c(w),{modelValue:a.value.idEmpleado,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.idEmpleado=t),options:_.value,optionLabel:"nameFull",optionValue:"id",placeholder:"Seleccione un empleado",fluid:"",filter:"",filterPlaceholder:"Buscar empleado",class:"w-full"},null,8,["modelValue","options"]),n.value&&!a.value.idEmpleado?(r(),d("small",ae,"Debe seleccionar un empleado.")):u("",!0),o.value.idEmpleado?(r(),d("small",le,f(o.value.idEmpleado[0]),1)):u("",!0)]),l("div",se,[e[12]||(e[12]=l("label",{class:"block font-bold mb-2"},[m("Estado "),l("span",{class:"text-red-500"},"*")],-1)),l("div",oe,[i(c(q),{modelValue:a.value.state,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.state=t),binary:!0},null,8,["modelValue"]),i(c(T),{value:a.value.state?"Activo":"Inactivo",severity:a.value.state?"success":"danger"},null,8,["value","severity"])]),o.value.state?(r(),d("small",te,f(o.value.state[0]),1)):u("",!0)])])])]),_:1},8,["visible"])],64))}});export{be as _};
