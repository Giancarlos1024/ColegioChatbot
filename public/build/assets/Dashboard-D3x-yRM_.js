import{d as N,r as x,c as n,a as d,g as e,t,j as b,F as f,X as _,i as m,n as S}from"./app-CSI2DTQR.js";const j={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},F={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},M={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},q={class:"flex justify-between items-center h-16"},O={class:"flex items-center space-x-4"},$={class:"text-sm text-gray-700 dark:text-gray-300"},B={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},H={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},P={class:"text-sm text-gray-900 dark:text-white"},V={class:"text-sm text-gray-900 dark:text-white"},X={class:"text-sm text-gray-900 dark:text-white"},A={class:"text-sm text-gray-900 dark:text-white"},K={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},R={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},z={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},U={key:0,class:"text-center py-8"},G={key:1,class:"space-y-3"},J={class:"flex justify-between items-start"},Q={class:"font-medium text-gray-900 dark:text-white"},W={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Y={class:"mt-2 space-y-1 text-sm text-gray-500"},Z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},ee={class:"space-y-4"},se={class:"flex justify-between items-start"},te={class:"flex-1"},re={class:"font-medium text-gray-900 dark:text-white"},oe={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ae={class:"mt-2 space-y-1 text-sm text-gray-500"},ie={class:"ml-4 flex flex-col items-end"},ne=["onClick","disabled"],de=["onClick","disabled"],le={key:0,class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},ce={class:"text-sm text-green-600"},me={key:1,class:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg"},ue={class:"text-sm text-red-600"},xe=N({__name:"Dashboard",props:{user:{},talleresDisponibles:{},misTalleres:{}},setup(w){const T=w,u=x(!1),g=x(!1),l=x(""),i=x(""),p=o=>T.misTalleres.some(s=>s.id===o),E=async o=>{var s;u.value=!0,l.value="",i.value="";try{const a=await fetch(`/student/inscribirse/${o}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""}}),c=await a.json();a.ok?(l.value=c.message||"¡Te has inscrito exitosamente!",setTimeout(()=>{window.location.reload()},1500)):i.value=c.message||"Error al inscribirse en el taller."}catch(a){console.error("Error:",a),i.value="Error de conexión. Inténtalo nuevamente."}finally{u.value=!1}},C=async o=>{var s;if(confirm("¿Estás segura de que quieres desinscribirte de este taller?")){g.value=!0,l.value="",i.value="";try{const a=await fetch(`/student/desinscribirse/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""}}),c=await a.json();a.ok?(l.value=c.message||"Te has desinscrito exitosamente.",setTimeout(()=>{window.location.reload()},1500)):i.value=c.message||"Error al desinscribirse del taller."}catch(a){console.error("Error:",a),i.value="Error de conexión. Inténtalo nuevamente."}finally{g.value=!1}}},D=()=>{setTimeout(()=>{l.value="",i.value=""},5e3)};return watch([l,i],()=>{(l.value||i.value)&&D()}),(o,s)=>{var a,c,y,v,h,k;return d(),n("div",j,[e("header",F,[e("div",M,[e("div",q,[s[1]||(s[1]=e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/imagenes/admin.png",alt:"INIF 48",class:"w-10 h-10 rounded-full object-cover"}),e("div",null,[e("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"INIF N° 48"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Dashboard - Estudiante")])],-1)),e("div",O,[e("span",$,"Hola, "+t((a=o.user)==null?void 0:a.name),1),s[0]||(s[0]=e("form",{action:"/student/logout",method:"POST",class:"inline"},[e("button",{type:"submit",class:"text-sm text-red-600 hover:text-red-700 font-medium"}," Cerrar Sesión ")],-1))])])])]),e("main",B,[e("div",H,[s[6]||(s[6]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Mi Perfil",-1)),e("div",L,[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Nombre",-1)),e("p",P,t((c=o.user)==null?void 0:c.name)+" "+t((y=o.user)==null?void 0:y.apellidos),1)]),e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"DNI",-1)),e("p",V,t((v=o.user)==null?void 0:v.dni),1)]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),e("p",X,t((h=o.user)==null?void 0:h.email),1)]),e("div",null,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Username",-1)),e("p",A,t((k=o.user)==null?void 0:k.username),1)])])]),e("div",K,[e("div",R,[e("h2",z," Mis Talleres ("+t(o.misTalleres.length)+") ",1),o.misTalleres.length===0?(d(),n("div",U,[...s[7]||(s[7]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"No estás inscrita en ningún taller",-1),e("p",{class:"text-sm text-gray-400 mt-2"},"Explora los talleres disponibles para inscribirte",-1)])])):(d(),n("div",G,[(d(!0),n(f,null,_(o.misTalleres,r=>(d(),n("div",{key:r.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",J,[e("div",null,[e("h3",Q,t(r.nombre),1),e("p",W,t(r.descripcion),1),e("div",Y,[e("p",null,[s[8]||(s[8]=e("strong",null,"Horario:",-1)),m(" "+t(r.hora_inicio)+" - "+t(r.hora_fin),1)]),e("p",null,[s[9]||(s[9]=e("strong",null,"Sede:",-1)),m(" "+t(r.sede),1)])])]),s[10]||(s[10]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}," Inscrita ",-1))])]))),128))]))]),e("div",Z,[s[14]||(s[14]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Talleres Disponibles ",-1)),e("div",ee,[(d(!0),n(f,null,_(o.talleresDisponibles,r=>(d(),n("div",{key:r.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",se,[e("div",te,[e("h3",re,t(r.nombre),1),e("p",oe,t(r.descripcion),1),e("div",ae,[e("p",null,[s[11]||(s[11]=e("strong",null,"Capacidad:",-1)),m(" "+t(r.capacidad_alumnos)+" estudiantes",1)]),e("p",null,[s[12]||(s[12]=e("strong",null,"Horario:",-1)),m(" "+t(r.hora_inicio)+" - "+t(r.hora_fin),1)]),e("p",null,[s[13]||(s[13]=e("strong",null,"Sede:",-1)),m(" "+t(r.sede),1)])])]),e("div",ie,[e("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mb-2",{"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":r.estado==="lleno","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":r.estado==="disponible"}])},t(r.estado==="lleno"?"Lleno":"Disponible"),3),r.estado==="disponible"&&!p(r.id)?(d(),n("button",{key:0,onClick:I=>E(r.id),disabled:u.value,class:"text-sm bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded disabled:opacity-50"},t(u.value?"Inscribiendo...":"Inscribirme"),9,ne)):b("",!0),p(r.id)?(d(),n("button",{key:1,onClick:I=>C(r.id),disabled:g.value,class:"text-sm bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded disabled:opacity-50"},t(g.value?"Desinscribiendo...":"Desinscribirme"),9,de)):b("",!0)])])]))),128))])])]),l.value?(d(),n("div",le,[e("p",ce,t(l.value),1)])):b("",!0),i.value?(d(),n("div",me,[e("p",ue,t(i.value),1)])):b("",!0)])])}}});export{xe as default};
