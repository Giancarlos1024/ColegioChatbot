import{d as T,r as n,aa as C,B as c,e as N,a as f,w as b,g as o,b as p,c as $,j as w,i as y,f as i,n as B,t as h,a2 as E}from"./app-CSI2DTQR.js";import{s as z}from"./index-Bd5u6C13.js";import{s as U}from"./index-DWx6GgBR.js";import{s as g}from"./index-CIJ9kEDP.js";import{s as A}from"./index-DTrYfW8t.js";import{s as D}from"./index-BsSS1dRr.js";const j={class:"flex flex-col gap-6"},q={class:"grid grid-cols-12 gap-4"},G={class:"col-span-9"},O={key:0,class:"p-error"},R={class:"col-span-3"},S={class:"flex items-center gap-3"},M=T({__name:"UpdateTipoEmpleado",props:{visible:{type:Boolean},tipoEmpleadoId:{}},emits:["update:visible","updated"],setup(x,{emit:V}){const l=x,v=V,d=n({}),_=n(!1),m=C(),u=n(!1),r=n(l.visible);c(()=>l.visible,a=>r.value=a),c(r,a=>v("update:visible",a));const s=n({name:"",state:!1}),k=async()=>{if(l.tipoEmpleadoId){u.value=!0;try{const e=(await E.get(`/tipo_empleado/${l.tipoEmpleadoId}`)).data.employeeType;s.value.name=e.name,s.value.state=e.state}catch(a){m.add({severity:"error",summary:"Error",detail:"No se pudo cargar el tipo de empleado",life:3e3}),console.error(a)}finally{u.value=!1}}};c(()=>l.visible,a=>{a&&l.tipoEmpleadoId&&k()});const I=async()=>{var a;if(_.value=!0,d.value={},!!l.tipoEmpleadoId)try{const e={name:s.value.name,state:s.value.state};await E.put(`/tipo_empleado/${l.tipoEmpleadoId}`,e),m.add({severity:"success",summary:"Actualizado",detail:"Tipo de empleado actualizado correctamente",life:3e3}),r.value=!1,v("updated")}catch(e){const t=e;((a=t.response)==null?void 0:a.status)===422&&t.response.data?(d.value=t.response.data.errors||{},m.add({severity:"error",summary:"Error de validaciÃ³n",detail:"Revisa los campos e intenta nuevamente.",life:5e3})):m.add({severity:"error",summary:"Error",detail:"No se pudo actualizar el tipo de empleado",life:3e3}),console.error(e)}};return(a,e)=>(f(),N(i(z),{visible:r.value,"onUpdate:visible":e[3]||(e[3]=t=>r.value=t),header:"Editar Tipo de Empleado",modal:"",closable:!0,closeOnEscape:!0,style:{width:"90%",maxWidth:"600px"}},{footer:b(()=>[p(i(g),{label:"Cancelar",icon:"pi pi-times",text:"",onClick:e[2]||(e[2]=t=>r.value=!1)}),p(i(g),{label:"Guardar",icon:"pi pi-check",onClick:I,loading:u.value},null,8,["loading"])]),default:b(()=>[o("div",j,[o("div",q,[o("div",G,[e[4]||(e[4]=o("label",{for:"name",class:"block font-bold mb-3"},[y("Nombre "),o("span",{class:"text-red-500"},"*")],-1)),p(i(U),{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t),required:"",maxlength:"100",class:B({"p-invalid":d.value.name})},null,8,["modelValue","class"]),d.value.name?(f(),$("small",O,h(d.value.name[0]),1)):w("",!0)]),o("div",R,[e[5]||(e[5]=o("label",{for:"state",class:"block font-bold mb-2"},[y("Estado "),o("span",{class:"text-red-500"},"*")],-1)),o("div",S,[p(i(D),{modelValue:s.value.state,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.state=t),binary:!0,inputId:"state"},null,8,["modelValue"]),p(i(A),{value:s.value.state?"Activo":"Inactivo",severity:s.value.state?"success":"danger"},null,8,["value","severity"])])])])])]),_:1},8,["visible"]))}});export{M as _};
