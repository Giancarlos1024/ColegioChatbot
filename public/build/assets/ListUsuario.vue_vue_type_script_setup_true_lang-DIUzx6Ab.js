import{s as f}from"./index-CIJ9kEDP.js";import{s as V,a as o}from"./index-8c4t-1rM.js";import{s as B,a as N}from"./index-CqE_d7Eh.js";import{s as F}from"./index-DWx6GgBR.js";import{s as U}from"./index-DTrYfW8t.js";import{d as A,r,B as M,a2 as S,o as O,c as T,a as j,F as z,b as e,f as a,w as u,g as d}from"./app-CSI2DTQR.js";import{l as G}from"./lodash-B3zt2wbW.js";import{_ as K}from"./DeleteUsuario.vue_vue_type_script_setup_true_lang-CCZvP914.js";import{_ as q}from"./updateUsuario.vue_vue_type_script_setup_true_lang-NbjVGewf.js";const H={class:"flex flex-wrap gap-2 items-center justify-between"},J={class:"flex flex-wrap gap-2"},se=A({__name:"ListUsuario",props:{refresh:{}},setup(_){const k=r(null),g=r([]),h=r(null),c=r(!1),p=r(""),m=r(!1),y=r(null),b=r(null),v=r(!1),x=_;M(()=>x.refresh,()=>{i()});function $(l){b.value=l.id,v.value=!0}function C(){i()}function R(l){y.value=l,m.value=!0}function D(){i()}const n=r({currentPage:1,perPage:15,total:0}),w=r({status:null,online:null}),i=async()=>{c.value=!0;try{const l=await S.get("/usuarios",{params:{page:n.value.currentPage,per_page:n.value.perPage,search:p.value,status:w.value.status,online:w.value.online}});g.value=l.data.data,n.value.currentPage=l.data.meta.current_page,n.value.total=l.data.meta.total}catch(l){console.error("Error cargando usuarios:",l)}finally{c.value=!1}},I=l=>{n.value.currentPage=l.page+1,n.value.perPage=l.rows,i()},P=l=>l?"success":"danger",L=G.debounce(()=>{n.value.currentPage=1,i()},500);return O(()=>{i()}),(l,s)=>(j(),T(z,null,[e(a(V),{ref_key:"dt",ref:k,selection:h.value,"onUpdate:selection":s[1]||(s[1]=t=>h.value=t),value:g.value,dataKey:"id",paginator:!0,rows:n.value.perPage,totalRecords:n.value.total,loading:c.value,lazy:!0,onPage:I,rowsPerPageOptions:[15,20,25],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} usuarios"},{header:u(()=>[d("div",H,[s[5]||(s[5]=d("h4",{class:"m-0"},"Usuarios",-1)),d("div",J,[e(a(B),null,{default:u(()=>[e(a(N),null,{default:u(()=>[...s[4]||(s[4]=[d("i",{class:"pi pi-search"},null,-1)])]),_:1}),e(a(F),{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),onInput:a(L),placeholder:"Buscar usuario..."},null,8,["modelValue","onInput"])]),_:1}),e(a(f),{icon:"pi pi-refresh",outlined:"",rounded:"","aria-label":"Refresh",onClick:i})])])]),default:u(()=>[e(a(o),{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),e(a(o),{field:"role",header:"Rol",sortable:"",style:{"min-width":"4rem"}}),e(a(o),{field:"username",header:"Usuario",sortable:"",style:{"min-width":"12rem"}}),e(a(o),{field:"dni",header:"DNI",sortable:"",style:{"min-width":"4rem"}}),e(a(o),{field:"name1",header:"Nombres y Apellidos",sortable:"",style:{"min-width":"32rem"}}),e(a(o),{field:"email",header:"Email",sortable:"",style:{"min-width":"25rem"}}),e(a(o),{field:"creacion",header:"Creación",sortable:"",style:{"min-width":"13rem"}}),e(a(o),{field:"online",header:"Online",sortable:"",style:{"min-width":"9rem"}},{body:u(({data:t})=>[e(a(U),{value:t.online?"En línea":"Sin conexión",severity:P(t.online)},null,8,["value","severity"])]),_:1}),e(a(o),{field:"status",header:"Estado",sortable:"",style:{"min-width":"4rem"}},{body:u(({data:t})=>[e(a(U),{value:t.status?"Activo":"Inactivo",severity:P(t.status)},null,8,["value","severity"])]),_:1}),e(a(o),{field:"acciones",header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:u(t=>[e(a(f),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:E=>$(t.data)},null,8,["onClick"]),e(a(f),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:E=>R(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","rows","totalRecords","loading"]),e(K,{visible:m.value,"onUpdate:visible":s[2]||(s[2]=t=>m.value=t),product:y.value,onDeleted:D},null,8,["visible","product"]),e(q,{visible:v.value,"onUpdate:visible":s[3]||(s[3]=t=>v.value=t),UsuarioId:b.value,onUpdated:C},null,8,["visible","UsuarioId"])],64))}});export{se as _};
