import{d as D,r as s,b2 as L,B as M,a2 as N,o as U,c as p,a as m,b as e,f as t,w as r,F as B,g as f}from"./app-CSI2DTQR.js";import{s as V,a as i}from"./index-8c4t-1rM.js";import{s as F,a as I}from"./index-CqE_d7Eh.js";import{s as T}from"./index-DWx6GgBR.js";import{s as w}from"./index-CIJ9kEDP.js";import{_ as A}from"./DeleteRoles.vue_vue_type_script_setup_true_lang-JPcN_s-k.js";import{_ as E}from"./UpdateRoles.vue_vue_type_script_setup_true_lang-DjqSAoRH.js";const O={class:"flex flex-wrap gap-2 items-center justify-between"},j={key:1},Q=D({__name:"ListRoles",props:{refresh:{}},setup(y){const k=s(null),v=s([]),g=s(null),b=s(null),h=s(null),d=s(!1),u=s(!1),c=s({global:{value:null,matchMode:L.CONTAINS}}),R=y;M(()=>R.refresh,()=>{n()});const n=async()=>{try{const o=await N.get("/rol");v.value=o.data.data}catch(o){console.error("Error al cargar los roles:",o)}};function _(o){h.value=o.id,d.value=!0}function P(o){b.value=o,u.value=!0}function x(){n()}function C(){n()}return U(()=>{n()}),(o,l)=>(m(),p("div",null,[e(t(V),{ref_key:"dt",ref:k,selection:g.value,"onUpdate:selection":l[1]||(l[1]=a=>g.value=a),value:v.value,dataKey:"id",paginator:!0,rows:10,filters:c.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} roles"},{header:r(()=>[f("div",O,[l[5]||(l[5]=f("h4",{class:"m-0"},"Roles y Permisos",-1)),e(t(F),null,{default:r(()=>[e(t(I),null,{default:r(()=>[...l[4]||(l[4]=[f("i",{class:"pi pi-search"},null,-1)])]),_:1}),e(t(T),{modelValue:c.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value.global.value=a),placeholder:"Buscar..."},null,8,["modelValue"])]),_:1})])]),default:r(()=>[e(t(i),{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),e(t(i),{field:"name",header:"Nombre",sortable:"",style:{"min-width":"12rem"}}),e(t(i),{field:"created_at",header:"CreaciÃ³n",sortable:"",style:{"min-width":"16rem"}}),e(t(i),{field:"updated_at",header:"Modificado",sortable:"",style:{"min-width":"16rem"}}),e(t(i),{field:"accions",header:"Acciones",exportable:!1,style:{"min-width":"8rem"}},{body:r(a=>[a.data.name!=="administrador"?(m(),p(B,{key:0},[e(t(w),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:$=>_(a.data)},null,8,["onClick"]),e(t(w),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:$=>P(a.data)},null,8,["onClick"])],64)):(m(),p("span",j,"No editable"))]),_:1})]),_:1},8,["selection","value","filters"]),e(A,{visible:u.value,"onUpdate:visible":l[2]||(l[2]=a=>u.value=a),rol:b.value,onDeleted:x},null,8,["visible","rol"]),e(E,{visible:d.value,"onUpdate:visible":l[3]||(l[3]=a=>d.value=a),RolId:h.value,onUpdated:C},null,8,["visible","RolId"])]))}});export{Q as _};
